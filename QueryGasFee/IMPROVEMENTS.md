# Gas Fee Tracker æ”¹è¿›è¯´æ˜

## ğŸ¯ è§£å†³çš„é—®é¢˜

### 1. APIå¯†é’¥é…ç½®é—®é¢˜
**é—®é¢˜**: æ¯æ¬¡å¯åŠ¨è„šæœ¬éƒ½éœ€è¦é‡æ–°è¾“å…¥é…ç½®ï¼Œ.envæ–‡ä»¶ä¸­çš„APIå¯†é’¥æ²¡æœ‰èµ·ä½œç”¨

**è§£å†³æ–¹æ¡ˆ**:
- âœ… ä¿®æ”¹ `config.py`ï¼Œæ·»åŠ  `python-dotenv` æ”¯æŒ
- âœ… è‡ªåŠ¨åŠ è½½ `.env` æ–‡ä»¶ä¸­çš„é…ç½®
- âœ… æ— éœ€åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥

### 2. JSONæ–‡ä»¶åƒåœ¾å †ç§¯é—®é¢˜
**é—®é¢˜**: æ¯æ¬¡ä¿å­˜ç»“æœéƒ½ä¼šäº§ç”Ÿæ–°çš„JSONæ–‡ä»¶ï¼Œé•¿æœŸä½¿ç”¨ä¼šäº§ç”Ÿå¾ˆå¤šåƒåœ¾æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**:
- âœ… æ™ºèƒ½æ–‡ä»¶å‘½åï¼šåŒ…å«æ—¶é—´æˆ³å’Œåœ°å€æ ‡è¯†
- âœ… è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼šé»˜è®¤ä¿ç•™æœ€æ–°10ä¸ªæ–‡ä»¶
- âœ… å¯é…ç½®çš„æ¸…ç†ç­–ç•¥

## ğŸ”§ ä¸»è¦æ”¹è¿›

### 1. é…ç½®ç®¡ç†æ”¹è¿›

#### ä¿®æ”¹çš„æ–‡ä»¶
- `config.py`: æ·»åŠ äº† `load_dotenv()` è°ƒç”¨
- `config_manager.py`: æ–°å¢é…ç½®æ£€æŸ¥å·¥å…·

#### ä½¿ç”¨æ–¹æ³•
```bash
# æ£€æŸ¥é…ç½®çŠ¶æ€
python config_manager.py
```

#### åŠŸèƒ½ç‰¹æ€§
- ğŸ” æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ğŸ”‘ éªŒè¯APIå¯†é’¥é…ç½®çŠ¶æ€
- ğŸ“‹ æ˜¾ç¤ºé…ç½®æŒ‡å—
- âœ… è‡ªåŠ¨åŠ è½½ç¯å¢ƒå˜é‡

### 2. æ–‡ä»¶ç®¡ç†æ”¹è¿›

#### ä¿®æ”¹çš„æ–‡ä»¶
- `main.py`: å¢å¼ºäº† `save_results()` æ–¹æ³•
- æ·»åŠ äº† `_cleanup_old_files()` æ–¹æ³•

#### æ–°åŠŸèƒ½
```python
# ä¸“ç”¨å­˜å‚¨ç›®å½•
data_save_dir = Path("Data_Save")
data_save_dir.mkdir(exist_ok=True)

# æ™ºèƒ½æ–‡ä»¶å‘½å
gas_fee_analysis_20250806_001234_d2C674e3.json
#                 ^^^^^^^^  ^^^^^^  ^^^^^^^^
#                 æ—¥æœŸæ—¶é—´   æ—¶åˆ†ç§’   åœ°å€æ ‡è¯†

# è‡ªåŠ¨æ¸…ç†é…ç½®
tracker.save_results(stats, auto_cleanup=True)  # é»˜è®¤å¯ç”¨
tracker._cleanup_old_files(max_files=10)        # ä¿ç•™æ–‡ä»¶æ•°é‡
```

#### åŠŸèƒ½ç‰¹æ€§
- ğŸ“ ä¸“ç”¨Data_Saveç›®å½•å­˜å‚¨
- ğŸ“ æœ‰æ„ä¹‰çš„æ–‡ä»¶åï¼ˆåŒ…å«åœ°å€æ ‡è¯†ï¼‰
- ğŸ§¹ è‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶
- âš™ï¸ å¯é…ç½®çš„ä¿ç•™ç­–ç•¥
- ğŸ“Š æŒ‰ä¿®æ”¹æ—¶é—´æ’åºç®¡ç†

### 3. æ–°å¢å·¥å…·è„šæœ¬

#### `config_manager.py`
é…ç½®æ£€æŸ¥å’Œç®¡ç†å·¥å…·
```bash
python config_manager.py
```

#### `demo_improvements.py`
æ”¹è¿›åŠŸèƒ½æ¼”ç¤ºè„šæœ¬
```bash
python demo_improvements.py
```

## ğŸ“‹ ä½¿ç”¨æŒ‡å—

### 1. é¦–æ¬¡é…ç½®

1. **æ£€æŸ¥é…ç½®çŠ¶æ€**:
   ```bash
   python config_manager.py
   ```

2. **å¦‚æœ.envæ–‡ä»¶ä¸å­˜åœ¨**:
   ```bash
   cp .env.example .env
   ```

3. **ç¼–è¾‘.envæ–‡ä»¶**:
   ```bash
   # å¡«å…¥çœŸå®çš„APIå¯†é’¥
   ETHERSCAN_API_KEY=your_actual_api_key_here
   BSCSCAN_API_KEY=your_bscscan_key_here
   # ... å…¶ä»–å¯†é’¥
   ```

4. **éªŒè¯é…ç½®**:
   ```bash
   python config_manager.py
   ```

### 2. æ—¥å¸¸ä½¿ç”¨

#### åŸºæœ¬åˆ†æ
```python
from main import GasFeeTracker
from config import config

async def analyze():
    # è‡ªåŠ¨ä».envåŠ è½½APIå¯†é’¥
    api_keys = config.api_config.get_api_keys()
    
    async with GasFeeTracker() as tracker:
        stats = await tracker.analyze_gas_fees(
            addresses=["0x..."],
            chains=['ethereum'],
            api_keys=api_keys  # ä½¿ç”¨.envä¸­çš„é…ç½®
        )
        
        # è‡ªåŠ¨ç®¡ç†æ–‡ä»¶
        tracker.save_results(stats)  # è‡ªåŠ¨æ¸…ç†å¯ç”¨
```

#### ç¦ç”¨è‡ªåŠ¨æ¸…ç†
```python
# ä¿å­˜é‡è¦ç»“æœæ—¶ç¦ç”¨è‡ªåŠ¨æ¸…ç†
tracker.save_results(stats, auto_cleanup=False)

# æˆ–æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶å
tracker.save_results(stats, filename="important_analysis.json")
```

### 3. æ–‡ä»¶ç®¡ç†ç­–ç•¥

#### è‡ªåŠ¨ç®¡ç†ï¼ˆæ¨èï¼‰
- âœ… é»˜è®¤å¯ç”¨
- âœ… ä¿ç•™æœ€æ–°10ä¸ªæ–‡ä»¶
- âœ… è‡ªåŠ¨åˆ é™¤æ—§æ–‡ä»¶

#### æ‰‹åŠ¨ç®¡ç†
```python
# ç¦ç”¨è‡ªåŠ¨æ¸…ç†
tracker.save_results(stats, auto_cleanup=False)

# è‡ªå®šä¹‰ä¿ç•™æ•°é‡
tracker._cleanup_old_files(max_files=20)
```

#### é‡è¦æ•°æ®ä¿æŠ¤
```python
# é‡è¦åˆ†æç»“æœä½¿ç”¨è‡ªå®šä¹‰æ–‡ä»¶å
tracker.save_results(stats, filename="quarterly_report_2024Q1.json")
```

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»æ—§ç‰ˆæœ¬å‡çº§

1. **æ›´æ–°ä¾èµ–**:
   ```bash
   pip install -r requirements.txt
   ```

2. **æ£€æŸ¥.envæ–‡ä»¶**:
   ```bash
   python config_manager.py
   ```

3. **æµ‹è¯•åŠŸèƒ½**:
   ```bash
   python demo_improvements.py
   ```

### å…¼å®¹æ€§è¯´æ˜
- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… ç°æœ‰è„šæœ¬æ— éœ€ä¿®æ”¹
- âœ… è‡ªåŠ¨å¯ç”¨æ–°åŠŸèƒ½

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†
- ğŸ” å°†APIå¯†é’¥ä¿å­˜åœ¨ `.env` æ–‡ä»¶ä¸­
- ğŸš« ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âœ… å®šæœŸæ£€æŸ¥é…ç½®çŠ¶æ€

### 2. æ–‡ä»¶ç®¡ç†
- ğŸ“ è®©ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†æ—¥å¸¸åˆ†ææ–‡ä»¶
- ğŸ’¾ é‡è¦ç»“æœæ‰‹åŠ¨å‘½åä¿å­˜
- ğŸ—‚ï¸ å®šæœŸå¤‡ä»½é‡è¦æ•°æ®

### 3. æ€§èƒ½ä¼˜åŒ–
- âš¡ ä½¿ç”¨æ—¶é—´èŒƒå›´é™åˆ¶å‡å°‘APIè°ƒç”¨
- ğŸ”„ åˆ©ç”¨è‡ªåŠ¨æ¸…ç†é¿å…ç£ç›˜ç©ºé—´æµªè´¹
- ğŸ“Š è€ƒè™‘æ•°æ®åº“å­˜å‚¨é•¿æœŸæ•°æ®

## ğŸš€ æœªæ¥æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿›
- ğŸ“Š æ·»åŠ æ•°æ®åº“æ”¯æŒï¼ˆSQLite/PostgreSQLï¼‰
- ğŸ“ˆ å¢åŠ æ•°æ®å¯è§†åŒ–åŠŸèƒ½
- ğŸ”” æ·»åŠ ç»“æœé€šçŸ¥åŠŸèƒ½

### é•¿æœŸè§„åˆ’
- ğŸŒ Webç•Œé¢æ”¯æŒ
- ğŸ“± ç§»åŠ¨ç«¯åº”ç”¨
- â˜ï¸ äº‘ç«¯æ•°æ®åŒæ­¥

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. è¿è¡Œ `python config_manager.py` æ£€æŸ¥é…ç½®
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `gas_fee_tracker.log`
3. è¿è¡Œ `python demo_improvements.py` æµ‹è¯•åŠŸèƒ½

---

**æ›´æ–°æ—¥æœŸ**: 2025-08-06  
**ç‰ˆæœ¬**: v2.0  
**æ”¹è¿›**: é…ç½®ç®¡ç† + æ–‡ä»¶ç®¡ç†ä¼˜åŒ–